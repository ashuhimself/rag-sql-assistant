{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/ashu/Desktop/warehouse-copilot/rag-sql-assistant/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import React,{useState}from'react';import styled from'styled-components';import ReactMarkdown from'react-markdown';import{Prism as SyntaxHighlighter}from'react-syntax-highlighter';import{tomorrow}from'react-syntax-highlighter/dist/esm/styles/prism';import QueryResult from'./QueryResult';import DataVisualization from'./analytics/DataVisualization';import InsightsPanel from'./analytics/InsightsPanel';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: \",\";\\n  margin-bottom: 1rem;\\n\"])),props=>props.messageType==='user'?'flex-end':'flex-start');const Bubble=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  max-width: 70%;\\n  padding: 1rem 1.25rem;\\n  border-radius: 18px;\\n  background: \",\";\\n  color: \",\";\\n  border: \",\";\\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\\n\"])),props=>{if(props.messageType==='user')return'#007bff';if(props.messageType==='system')return'#dc3545';return'#f8f9fa';},props=>{if(props.messageType==='user')return'white';if(props.messageType==='system')return'white';return'#333';},props=>props.messageType==='assistant'?'1px solid #e9ecef':'none');const MessageContent=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  word-wrap: break-word;\\n\\n  p:last-child {\\n    margin-bottom: 0;\\n  }\\n\\n  code {\\n    background: rgba(0,0,0,0.1);\\n    padding: 0.2rem 0.4rem;\\n    border-radius: 3px;\\n    font-size: 0.9em;\\n  }\\n\"])));const SqlSection=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin-top: 1rem;\\n  padding-top: 1rem;\\n  border-top: 1px solid #e9ecef;\\n\"])));const SqlHeader=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 0.5rem;\\n\"])));const SqlLabel=styled.span(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  font-size: 0.8rem;\\n  color: #6c757d;\\n  font-weight: 600;\\n  text-transform: uppercase;\\n  letter-spacing: 0.5px;\\n\"])));const ToggleButton=styled.button(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  background: none;\\n  border: none;\\n  color: #007bff;\\n  cursor: pointer;\\n  font-size: 0.8rem;\\n  padding: 0.25rem 0.5rem;\\n  border-radius: 3px;\\n\\n  &:hover {\\n    background: rgba(0,123,255,0.1);\\n  }\\n\"])));const SqlContainer=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  background: #2d3748;\\n  border-radius: 6px;\\n  overflow: hidden;\\n\"])));const Timestamp=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  font-size: 0.75rem;\\n  opacity: 0.7;\\n  margin-top: 0.5rem;\\n\"])));const MessageBubble=_ref=>{let{message}=_ref;const[showSql,setShowSql]=useState(false);const[showResult,setShowResult]=useState(false);const[showAnalytics,setShowAnalytics]=useState(false);const formatTimestamp=timestamp=>{return new Date(timestamp).toLocaleTimeString();};return/*#__PURE__*/_jsx(Container,{messageType:message.message_type,children:/*#__PURE__*/_jsxs(Bubble,{messageType:message.message_type,children:[/*#__PURE__*/_jsx(MessageContent,{children:/*#__PURE__*/_jsx(ReactMarkdown,{children:message.content})}),message.sql_query&&/*#__PURE__*/_jsxs(SqlSection,{children:[/*#__PURE__*/_jsxs(SqlHeader,{children:[/*#__PURE__*/_jsx(SqlLabel,{children:\"SQL Query\"}),/*#__PURE__*/_jsxs(ToggleButton,{onClick:()=>setShowSql(!showSql),children:[showSql?'Hide':'Show',\" SQL\"]})]}),showSql&&/*#__PURE__*/_jsx(SqlContainer,{children:/*#__PURE__*/_jsx(SyntaxHighlighter,{language:\"sql\",style:tomorrow,customStyle:{margin:0,fontSize:'0.85rem'},children:message.sql_query})})]}),message.sql_result&&/*#__PURE__*/_jsxs(SqlSection,{children:[/*#__PURE__*/_jsxs(SqlHeader,{children:[/*#__PURE__*/_jsx(SqlLabel,{children:\"Query Result\"}),/*#__PURE__*/_jsxs(ToggleButton,{onClick:()=>setShowResult(!showResult),children:[showResult?'Hide':'Show',\" Result\"]})]}),showResult&&/*#__PURE__*/_jsx(QueryResult,{result:message.sql_result})]}),message.sql_result&&message.sql_result.analysis&&/*#__PURE__*/_jsxs(SqlSection,{children:[/*#__PURE__*/_jsxs(SqlHeader,{children:[/*#__PURE__*/_jsx(SqlLabel,{children:\"\\uD83D\\uDCCA Analytics & Insights\"}),/*#__PURE__*/_jsxs(ToggleButton,{onClick:()=>setShowAnalytics(!showAnalytics),children:[showAnalytics?'Hide':'Show',\" Analytics\"]})]}),showAnalytics&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(InsightsPanel,{insights:message.sql_result.analysis.insights||[],recommendations:message.sql_result.analysis.recommendations||[],statisticalSummary:message.sql_result.analysis.statistical,metadata:message.sql_result.analysis.metadata}),message.sql_result.analysis.visualizations&&message.sql_result.analysis.visualizations.length>0&&/*#__PURE__*/_jsx(\"div\",{children:message.sql_result.analysis.visualizations.slice(0,3).map((vizConfig,index)=>/*#__PURE__*/_jsx(DataVisualization,{config:vizConfig,data:message.sql_result.data||[],columns:message.sql_result.columns||[]},index))})]})]}),/*#__PURE__*/_jsx(Timestamp,{children:formatTimestamp(message.created_at)})]})});};export default MessageBubble;","map":{"version":3,"names":["React","useState","styled","ReactMarkdown","Prism","SyntaxHighlighter","tomorrow","QueryResult","DataVisualization","InsightsPanel","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","props","messageType","Bubble","_templateObject2","MessageContent","_templateObject3","SqlSection","_templateObject4","SqlHeader","_templateObject5","SqlLabel","span","_templateObject6","ToggleButton","button","_templateObject7","SqlContainer","_templateObject8","Timestamp","_templateObject9","MessageBubble","_ref","message","showSql","setShowSql","showResult","setShowResult","showAnalytics","setShowAnalytics","formatTimestamp","timestamp","Date","toLocaleTimeString","message_type","children","content","sql_query","onClick","language","style","customStyle","margin","fontSize","sql_result","result","analysis","insights","recommendations","statisticalSummary","statistical","metadata","visualizations","length","slice","map","vizConfig","index","config","data","columns","created_at"],"sources":["/Users/ashu/Desktop/warehouse-copilot/rag-sql-assistant/frontend/src/components/MessageBubble.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport ReactMarkdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { tomorrow } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport { ChatMessage } from '../types';\nimport QueryResult from './QueryResult';\nimport DataVisualization from './analytics/DataVisualization';\nimport InsightsPanel from './analytics/InsightsPanel';\n\nconst Container = styled.div<{ messageType: string }>`\n  display: flex;\n  justify-content: ${props => props.messageType === 'user' ? 'flex-end' : 'flex-start'};\n  margin-bottom: 1rem;\n`;\n\nconst Bubble = styled.div<{ messageType: string }>`\n  max-width: 70%;\n  padding: 1rem 1.25rem;\n  border-radius: 18px;\n  background: ${props => {\n    if (props.messageType === 'user') return '#007bff';\n    if (props.messageType === 'system') return '#dc3545';\n    return '#f8f9fa';\n  }};\n  color: ${props => {\n    if (props.messageType === 'user') return 'white';\n    if (props.messageType === 'system') return 'white';\n    return '#333';\n  }};\n  border: ${props => props.messageType === 'assistant' ? '1px solid #e9ecef' : 'none'};\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n`;\n\nconst MessageContent = styled.div`\n  word-wrap: break-word;\n\n  p:last-child {\n    margin-bottom: 0;\n  }\n\n  code {\n    background: rgba(0,0,0,0.1);\n    padding: 0.2rem 0.4rem;\n    border-radius: 3px;\n    font-size: 0.9em;\n  }\n`;\n\nconst SqlSection = styled.div`\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e9ecef;\n`;\n\nconst SqlHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5rem;\n`;\n\nconst SqlLabel = styled.span`\n  font-size: 0.8rem;\n  color: #6c757d;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n`;\n\nconst ToggleButton = styled.button`\n  background: none;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 0.8rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 3px;\n\n  &:hover {\n    background: rgba(0,123,255,0.1);\n  }\n`;\n\nconst SqlContainer = styled.div`\n  background: #2d3748;\n  border-radius: 6px;\n  overflow: hidden;\n`;\n\nconst Timestamp = styled.div`\n  font-size: 0.75rem;\n  opacity: 0.7;\n  margin-top: 0.5rem;\n`;\n\ninterface MessageBubbleProps {\n  message: ChatMessage;\n}\n\nconst MessageBubble: React.FC<MessageBubbleProps> = ({ message }) => {\n  const [showSql, setShowSql] = useState(false);\n  const [showResult, setShowResult] = useState(false);\n  const [showAnalytics, setShowAnalytics] = useState(false);\n\n  const formatTimestamp = (timestamp: string) => {\n    return new Date(timestamp).toLocaleTimeString();\n  };\n\n  return (\n    <Container messageType={message.message_type}>\n      <Bubble messageType={message.message_type}>\n        <MessageContent>\n          <ReactMarkdown>{message.content}</ReactMarkdown>\n        </MessageContent>\n\n        {message.sql_query && (\n          <SqlSection>\n            <SqlHeader>\n              <SqlLabel>SQL Query</SqlLabel>\n              <ToggleButton onClick={() => setShowSql(!showSql)}>\n                {showSql ? 'Hide' : 'Show'} SQL\n              </ToggleButton>\n            </SqlHeader>\n            {showSql && (\n              <SqlContainer>\n                <SyntaxHighlighter\n                  language=\"sql\"\n                  style={tomorrow}\n                  customStyle={{\n                    margin: 0,\n                    fontSize: '0.85rem',\n                  }}\n                >\n                  {message.sql_query}\n                </SyntaxHighlighter>\n              </SqlContainer>\n            )}\n          </SqlSection>\n        )}\n\n        {message.sql_result && (\n          <SqlSection>\n            <SqlHeader>\n              <SqlLabel>Query Result</SqlLabel>\n              <ToggleButton onClick={() => setShowResult(!showResult)}>\n                {showResult ? 'Hide' : 'Show'} Result\n              </ToggleButton>\n            </SqlHeader>\n            {showResult && (\n              <QueryResult result={message.sql_result} />\n            )}\n          </SqlSection>\n        )}\n\n        {message.sql_result && message.sql_result.analysis && (\n          <SqlSection>\n            <SqlHeader>\n              <SqlLabel>📊 Analytics & Insights</SqlLabel>\n              <ToggleButton onClick={() => setShowAnalytics(!showAnalytics)}>\n                {showAnalytics ? 'Hide' : 'Show'} Analytics\n              </ToggleButton>\n            </SqlHeader>\n            {showAnalytics && (\n              <div>\n                {/* Insights Panel */}\n                <InsightsPanel\n                  insights={message.sql_result.analysis.insights || []}\n                  recommendations={message.sql_result.analysis.recommendations || []}\n                  statisticalSummary={message.sql_result.analysis.statistical}\n                  metadata={message.sql_result.analysis.metadata}\n                />\n\n                {/* Visualizations */}\n                {message.sql_result.analysis.visualizations &&\n                 message.sql_result.analysis.visualizations.length > 0 && (\n                  <div>\n                    {message.sql_result.analysis.visualizations.slice(0, 3).map((vizConfig: any, index: number) => (\n                      <DataVisualization\n                        key={index}\n                        config={vizConfig}\n                        data={message.sql_result.data || []}\n                        columns={message.sql_result.columns || []}\n                      />\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </SqlSection>\n        )}\n\n        <Timestamp>\n          {formatTimestamp(message.created_at)}\n        </Timestamp>\n      </Bubble>\n    </Container>\n  );\n};\n\nexport default MessageBubble;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}